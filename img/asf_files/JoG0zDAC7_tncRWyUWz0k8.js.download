;/*FB_PKG_DELIM*/

__d("PresenceUtil",["CurrentUser","randomInt"],(function(a,b,c,d,e,f,g){var h=c("randomInt")(0,4294967295)+1;function a(){return h}function b(){return c("CurrentUser").isLoggedInNow()}g.getSessionID=a;g.hasUserCookie=b}),98);
__d("PresencePrivacy",["Arbiter","ArbiterMixin","AsyncRequest","Bootloader","ChannelConstants","CurrentUser","PresencePrivacyInitialData","PresenceUtil","mixin"],(function(a,b,c,d,e,f,g){var h="/ajax/chat/privacy/settings.php",i="/ajax/chat/privacy/online_policy.php",j="/ajax/chat/privacy/visibility.php",k="friend_visibility",l="visibility",m="online_policy",n=babelHelpers["extends"]({},d("PresencePrivacyInitialData").privacyData),o=d("PresencePrivacyInitialData").visibility,p=babelHelpers["extends"]({},d("PresencePrivacyInitialData").privacyData),q=o,r=d("PresencePrivacyInitialData").onlinePolicy,s=r,t=[],u=!1;b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.WHITELISTED=1,c.BLACKLISTED=-1,c.UNLISTED=0,c.ONLINE=1,c.OFFLINE=0,c.ONLINE_TO_WHITELIST=0,c.ONLINE_TO_BLACKLIST=1,b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.init=function(a,b,c){};c.setVisibility=function(a){q=o;z(a);var b={visibility:a},c={type:l,visibility:a};b=H(j,b,c);C(b,c);return a};c.getVisibility=function(){return o};c.setOnlinePolicy=function(a){s=r;A(a);var b={online_policy:a},c={type:m,online_policy:a};b=H(i,b,c);C(b,c);return a};c.getOnlinePolicy=function(){return r};c.getFriendVisibility=function(a){return n[a]||v.UNLISTED};c.getFriendsVisibility=function(){return n};c.isUserOffline=function(){return this.getVisibility()===v.OFFLINE};c.allows=function(a){return this.isUserOffline()?!1:this.allowsIfViewerIsOnline(a)};c.allowsIfViewerIsOnline=function(a){var b=this.getOnlinePolicy();return b===v.ONLINE_TO_WHITELIST?n[a]==v.WHITELISTED:n[a]!=v.BLACKLISTED};c.getOnlinePolicyStr=function(){if(this.isUserOffline())return"offline";var a=this.getOnlinePolicy();if(a===v.ONLINE_TO_WHITELIST)return"online_to_whitelist";return a===v.ONLINE_TO_BLACKLIST?"online_to_blacklist":"unknown"};c.setFriendsVisibility=function(a,b){if(a.length>0){var c={};for(var d=0;d<a.length;d++){var e=a[d];p[e]=n[e];c[e]=b}w(c);e=b;e==v.UNLISTED&&(e=p[a[0]]);d={users:a,setting:b,setting_type:e};a={type:k,settings:c};e=H(h,d,a);C(e,a)}return b};c.setFriendVisibilityMap=function(a,b){for(var c in a)p[c]=n[c];w(a);c={type:k,settings:a};C(G(b,c),c)};c.allow=function(a){if(this.allows(a))throw new Error("allow() should only be called for users that are not already allowed");if(this.getVisibility()===v.OFFLINE)throw new Error("allow() should only be called when the user is already online");var b=this.getOnlinePolicy()===v.ONLINE_TO_WHITELIST?v.WHITELISTED:v.UNLISTED;return this.setFriendsVisibility([a],b)};c.disallow=function(a){if(!this.allows(a))throw new Error("disallow() should only be called for users that are not already disallowed");if(this.getVisibility()===v.OFFLINE)throw new Error("disallow() should only be called when the user is already online");var b=this.getOnlinePolicy()===v.ONLINE_TO_BLACKLIST?v.BLACKLISTED:v.UNLISTED;return this.setFriendsVisibility([a],b)};c.getBlacklist=function(){var a=[];for(var b in n)n[b]===v.BLACKLISTED&&a.push(b);return a};c.getWhitelist=function(){var a=[];for(var b in n)n[b]===v.WHITELISTED&&a.push(b);return a};c.getMapForTest=function(){return n};c.setMapForTest=function(a){n=a};return b}(c("mixin")(c("ArbiterMixin")));var v=new b();function w(a){var b;for(b in a){var d=a[b];if(b==c("CurrentUser").getID())throw new Error("Invalid to set current user's visibility");switch(d){case v.WHITELISTED:case v.BLACKLISTED:case v.UNLISTED:break;default:throw new Error("Invalid state: "+d)}}for(b in a)n[b]=a[b];v.inform("privacy-changed")}function x(a,b){var c={};c[a]=b;w(c)}function y(a){c("Bootloader").loadModules(["MessengerMQTTPresenceReporting"],function(b){b.reportChatVisibility(!!a)},"PresencePrivacy")}function z(a){switch(a){case v.ONLINE:case v.OFFLINE:break;default:throw new Error("Invalid visibility: "+a)}o=a;y(a);v.inform("privacy-changed");v.inform("privacy-user-presence-changed")}function A(a){switch(a){case v.ONLINE_TO_WHITELIST:case v.ONLINE_TO_BLACKLIST:break;default:throw new Error("Invalid default online policy: "+a)}r=a;v.inform("privacy-user-presence-changed");v.inform("privacy-changed")}function B(a,b){u=!0,a.send()}function C(a,b){t.push({request:a,data:b});if(!u){a=t.shift();B(a.request,a.data)}}function D(a,b){b=a.type;if(b===k){v.inform("privacy-availability-changed");for(var c in a.settings)p[c]=a.settings[c]}else b===l?q=a.visibility:b===m&&(s=a.online_policy),v.inform("privacy-user-presence-response")}function E(a,b){o!==q&&z(q),r!==s&&A(s),Object.assign(n,p),v.inform("privacy-changed"),t=[]}function F(a){u=!1;if(t.length>0){a=t.shift();B(a.request,a.data)}}function G(a,b){if(d("PresenceUtil")!=null){var c=a.getData();c.window_id=d("PresenceUtil").getSessionID();a.setData(c)}a.setHandler(function(a){return D(b,a)}).setErrorHandler(function(a){return E(b,a)}).setTransportErrorHandler(function(a){return E(b,a)}).setFinallyHandler(function(a){return F(a)}).setAllowCrossPageTransition(!0);return a}function H(a,b,d){return G(new(c("AsyncRequest"))(a).setData(b),d)}function a(a,b){a=b.obj;if(a.viewer_id!=c("CurrentUser").getID())throw new Error("Viewer got from the channel is not the real viewer");if(a.window_id===d("PresenceUtil").getSessionID())return;var e=a.data;if(a.event=="access_control_entry")e.target_ids.forEach(function(a){x(a,e.setting),p[a]=e.setting});else{if(a.event=="visibility_update"){b=e.visibility?v.ONLINE:v.OFFLINE;z(b);q=b}else a.event=="online_policy_update"&&(A(e.online_policy),s=e.online_policy);v.inform("privacy-user-presence-response")}}v.inform("privacy-changed");v.inform("privacy-user-presence-changed","state");c("Arbiter").subscribe(d("ChannelConstants").getArbiterType("privacy_changed"),a);c("Arbiter").subscribe(d("ChannelConstants").ON_CONFIG,function(a,b){a=b.getConfig("visibility",null);if(a!==null&&typeof a!=="undefined"){b=a?v.ONLINE:v.OFFLINE;z(b)}});e=v;g["default"]=e}),98);
__d("ChatVisibility",["Arbiter","PresencePrivacy"],(function(a,b,c,d,e,f){var g={isOnline:function(){return b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE},hasBlackbirdEnabled:function(){return this.isVisibleToMostFriends()||this.isVisibleToSomeFriends()},isVisibleToMostFriends:function(){return b("PresencePrivacy").getOnlinePolicy()===b("PresencePrivacy").ONLINE_TO_BLACKLIST&&b("PresencePrivacy").getBlacklist().length>0},isVisibleToSomeFriends:function(){return b("PresencePrivacy").getOnlinePolicy()===b("PresencePrivacy").ONLINE_TO_WHITELIST&&b("PresencePrivacy").getWhitelist().length>0},goOnline:function(a){b("PresencePrivacy").getVisibility()===b("PresencePrivacy").OFFLINE&&(b("PresencePrivacy").setVisibility(b("PresencePrivacy").ONLINE),b("Arbiter").inform("chat-visibility/go-online")),a&&a()},goOffline:function(a){b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE&&(b("PresencePrivacy").setVisibility(b("PresencePrivacy").OFFLINE),b("Arbiter").inform("chat-visibility/go-offline")),a&&a()},toggleVisibility:function(){g.isOnline()?g.goOffline():g.goOnline()}};e.exports=g}),null);
__d("LastActiveTimes",["fbt","ServerTime"],(function(a,b,c,d,e,f,g,h){var i={};function j(a){if(!a||a<0)return null;a=d("ServerTime").get()/1e3-a;a=Math.floor(a/60);var b=Math.floor(a/60),c=Math.floor(b/24);if(a<=1)return h._("__JHASH__PF8DPi3Z2zY__JHASH__",[h._param("count",1,[0])]);else if(a<60)return h._("__JHASH__PF8DPi3Z2zY__JHASH__",[h._param("count",a,[0])]);else if(b<24)return h._("__JHASH__xmwge7mjIXY__JHASH__",[h._param("count",b,[0])]);else if(c<3)return h._("__JHASH__7v9O3hbScy6__JHASH__",[h._param("count",c,[0])]);else return null}function k(a,b){(!(a in i)||i[a]<b)&&(i[a]=b)}function l(a){if(a in i)return i[a];else return 0}function a(a){for(var b in a)k(b,a[b])}function b(a){return j(l(a))}function c(a){return l(a)}function e(){return i}g.update=a;g.getShortDisplay=b;g.get=c;g.getDebugData=e}),98);
__d("PresenceStatus",["ArbiterMixin","AvailableListConstants","AvailableListInitialData","Bootloader","ChatVisibility","CurrentUser","FBIDCheck","FBLogger","LastActiveTimes","ODS","PresenceConfig","PresencePrivacy","ServerTime","createObjectFrom","debounceAcrossTransitions","gkx"],(function(a,b,c,d,e,f,g){d("ODS").setEntitySample("presence",1e-4);var h={},i={},j={},k={},l=babelHelpers["extends"]({},c("ArbiterMixin")),m=c("debounceAcrossTransitions")(function(){return l.inform("change")},0);function n(a){var b,e=parseInt(a.topic.match(/\d+$/),10);a=parseInt(JSON.parse(a.payload).lat,10);var f=Date.now()-a*1e3;f=d("PresenceConfig").get("active_cutoff")*1e3-f;d("LastActiveTimes").update((b={},b[e]=a,b));l.checkPresence(e);l.get(e)===c("AvailableListConstants").ACTIVE&&(window.clearTimeout(k[e].timeout),k[e].timeout=window.setTimeout(function(){l.checkPresence(e)},f))}function o(a){return/^\d+$/.test(a)}Object.assign(l,{resetPresenceData:function(){h={},i={}},reset:function(){l.resetPresenceData(),j={}},get:function(a){!o(a)&&d("PresenceConfig").get("presence_throw_for_malformed_id")&&c("FBLogger")("presence").warn("received malformed id '%s'",a);if(a==c("CurrentUser").getID())return d("ChatVisibility").isOnline()?c("AvailableListConstants").ACTIVE:c("AvailableListConstants").OFFLINE;o(a)&&!d("FBIDCheck").isUser_deprecated(a)&&!k[a]&&(d("ODS").bumpEntityKey(3303,"presence","page_subscribe"),k[a]={},d("PresenceConfig").get("presence_page_green_dot_sub")&&c("Bootloader").loadModules(["SkywalkerManager"],function(b){return b.subscribe("presence_push/fb/"+a,n)},"PresenceStatus"));var b=c("AvailableListConstants").OFFLINE;a in h&&(b=h[a]);c("PresencePrivacy").allows(a)||(b=c("AvailableListConstants").OFFLINE);return b},getCapabilities:function(a){a=i[a];return a?a:0},isPlayingCanvasGameUser:function(a){return!!j[a]},getGroup:function(a){return a.some(function(a){return a==c("CurrentUser").getID()?!1:l.get(a)===c("AvailableListConstants").ACTIVE})?c("AvailableListConstants").ACTIVE:c("AvailableListConstants").OFFLINE},set:function(a,b,e,f,g,j){if(a==c("CurrentUser").getID())return!1;var k;if(b!=null){b=b==c("AvailableListConstants").ACTIVE?c("AvailableListConstants").ACTIVE:c("AvailableListConstants").OFFLINE;e=l.get(a);k=e!=b;if((k||b==c("AvailableListConstants").ACTIVE)&&d("FBIDCheck").isUser_deprecated(a)){d("LastActiveTimes").update((f={},f[a]=d("ServerTime").get()/1e3,f))}h[a]=b}e=!1;g!=null&&(e=l.getCapabilities(a)!=g,i[a]=g);f=k||e;f&&!j&&m();return f},setPlayingCanvasGameFriends:function(a){if(!c("gkx")("678262"))return;j=c("createObjectFrom")(a)},getOnlineIDs:function(){var a,b=[];for(a in h)l.get(a)===c("AvailableListConstants").ACTIVE&&b.push(a);return b},getAllIDs:function(){return Object.keys(h)},getOnlineCount:function(){return l.getOnlineIDs().length},getPresenceStats:function(){var a=0,b=0,d=0;for(var e in h){a+=1;switch(l.get(e)){case c("AvailableListConstants").OFFLINE:b+=1;break;case c("AvailableListConstants").ACTIVE:d+=1;break;default:break}}return{total:a,offline:b,active:d}},getAllDebugInfo:function(){var a={};for(var b in h)a[b]={p:h[b],vc:i[b]};return a},setMultiFromMQTT:function(a){var b={};Array.isArray(a)&&a.forEach(function(a){a.l&&(b[a.u]=a.l),l.set(a.u,a.p,!1,"mqtt",a.c,!0)});d("LastActiveTimes").update(b);m()},setMultiChatproxy:function(a){var b={};for(var c in a){a[c].lat&&(b[c]=a[c].lat);var e=a[c].p;l.set(c,e,!1,"chatproxy",a[c].vc,!0)}d("LastActiveTimes").update(b);m()},setMultiActive:function(a,b){var d=!1;a.forEach(function(a){l.set(a,c("AvailableListConstants").ACTIVE,!1,b,null,!0)&&(d=!0)});d&&m()},checkPresence:function(a){var b=!1,e=Math.ceil(Date.now()/1e3)-d("LastActiveTimes").get(a);l.set(a,e<d("PresenceConfig").get("active_cutoff")?c("AvailableListConstants").ACTIVE:c("AvailableListConstants").OFFLINE,!1,"pylon",null,!0)&&(b=!0);b&&m()}});c("AvailableListInitialData").activeList&&c("AvailableListInitialData").activeList.length>0&&l.setMultiActive(c("AvailableListInitialData").activeList,"available_list_active");c("AvailableListInitialData").playingNow&&c("AvailableListInitialData").playingNow.length>0&&l.setPlayingCanvasGameFriends(c("AvailableListInitialData").playingNow);c("AvailableListInitialData").lastActiveTimes&&Object.keys(c("AvailableListInitialData").lastActiveTimes).length>0&&d("LastActiveTimes").update(c("AvailableListInitialData").lastActiveTimes);a=l;g["default"]=a}),98);
__d("PageTransitionsComet",["URI","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){c("recoverableViolation")("PageTransitions."+a+" called unexpectedly. This is not supported in Comet!","comet_infra")}function a(){h("_executeCompleteCallbacks")}function b(a,b){h("_handleTransition");return!1}function d(){h("_hasBootloadErrors");return!1}function e(a){h("_historyManagerHandler");return!1}function f(){h("_init");return!1}function i(a,b,c){h("_loadPage")}function j(a,b){h("_warnBeforeLeaving")}function k(){h("disableScrollAnimation")}function l(){h("disableTransitions")}function m(){h("getCurrentURI");return new(c("URI"))()}function n(){h("getMostRecentURI");return new(c("URI"))()}function o(){h("getNextReferredURI");return new(c("URI"))()}function p(){h("getNextURI");return new(c("URI"))()}function q(){h("getReferrerURI");return new(c("URI"))()}function r(a,b){b===void 0,h("go")}function s(a,b){b===void 0,h("goBase")}function t(){h("init")}function u(){h("isInitalized");return!1}function v(){h("isTransitioning");return!1}function w(a){h("registerCompletionCallback")}function x(a,b){h("registerHandler")}function y(a,b){h("removeHanlder")}function z(a){h("restoreScrollPosition");return!1}function A(a,b){h("rewriteCurrentURI")}function B(a){a===void 0,h("transitionComplete")}function C(){h("unifyURI")}g._executeCompletionCallbacks=a;g._handleTransition=b;g._hasBootloadErrors=d;g._historyManagerHandler=e;g._init=f;g._loadPage=i;g._warnBeforeLeaving=j;g.disableScrollAnimation=k;g.disableTransitions=l;g.getCurrentURI=m;g.getMostRecentURI=n;g.getNextReferrerURI=o;g.getNextURI=p;g.getReferrerURI=q;g.go=r;g.goBase=s;g.init=t;g.isInitialized=u;g.isTransitioning=v;g.registerCompletionCallback=w;g.registerHandler=x;g.removeHandler=y;g.restoreScrollPosition=z;g.rewriteCurrentURI=A;g.transitionComplete=B;g.unifyURI=C}),98);
__d("PageTransitions",["cr:917439"],(function(a,b,c,d,e,f,g){g["default"]=b("cr:917439")}),98);/*FB_PKG_DELIM*/
__d("BasicVector",[],(function(a,b,c,d,e,f){a=function(){function a(a,b){this.x=a,this.y=b}var b=a.prototype;b.derive=function(b,c){return new a(b,c)};b.toString=function(){return"("+this.x+", "+this.y+")"};b.add=function(a,b){b===void 0&&(b=a.y,a=a.x);a=parseFloat(a);b=parseFloat(b);return this.derive(this.x+a,this.y+b)};b.mul=function(a,b){b===void 0&&(b=a);return this.derive(this.x*a,this.y*b)};b.div=function(a,b){b===void 0&&(b=a);return this.derive(this.x*1/a,this.y*1/b)};b.sub=function(a,b){if(arguments.length===1)return this.add(a.mul(-1));else return this.add(-a,-b)};b.distanceTo=function(a){return this.sub(a).magnitude()};b.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};b.rotate=function(a){return this.derive(this.x*Math.cos(a)-this.y*Math.sin(a),this.x*Math.sin(a)+this.y*Math.cos(a))};return a}();f["default"]=a}),66);
__d("DOMVector",["BasicVector","getDocumentScrollElement","getElementPosition","getUnboundedScrollPosition","getViewportDimensions"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){b=a.call(this,b,c)||this;b.domain=d||"pure";return b}var d=b.prototype;d.derive=function(a,c,d){return new b(a,c,d||this.domain)};d.add=function(c,d){c instanceof b&&c.getDomain()!=="pure"&&(c=c.convertTo(this.domain));return a.prototype.add.call(this,c,d)};d.convertTo=function(a){if(a!="pure"&&a!="viewport"&&a!="document")return this.derive(0,0);if(a==this.domain)return this.derive(this.x,this.y,this.domain);if(a=="pure")return this.derive(this.x,this.y);if(this.domain=="pure")return this.derive(0,0);var c=b.getScrollPosition("document"),d=this.x,e=this.y;this.domain=="document"?(d-=c.x,e-=c.y):(d+=c.x,e+=c.y);return this.derive(d,e,a)};d.getDomain=function(){return this.domain};b.from=function(a,c,d){return new b(a,c,d)};b.getScrollPosition=function(a){a=a||"document";var b=c("getUnboundedScrollPosition")(window);return this.from(b.x,b.y,"document").convertTo(a)};b.getElementPosition=function(a,b){b=b||"document";a=c("getElementPosition")(a);return this.from(a.x,a.y,"viewport").convertTo(b)};b.getElementDimensions=function(a){return this.from(a.offsetWidth||0,a.offsetHeight||0)};b.getViewportDimensions=function(){var a=c("getViewportDimensions")();return this.from(a.width,a.height,"viewport")};b.getLayoutViewportDimensions=function(){var a=c("getViewportDimensions").layout();return this.from(a.width,a.height,"viewport")};b.getViewportWithoutScrollbarDimensions=function(){var a=c("getViewportDimensions").withoutScrollbars();return this.from(a.width,a.height,"viewport")};b.getDocumentDimensions=function(a){a=c("getDocumentScrollElement")(a);return this.from(a.scrollWidth,a.scrollHeight,"document")};return b}(c("BasicVector"));g["default"]=a}),98);
__d("Vector",["DOMVector","Event","Scroll"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){return a.call(this,parseFloat(b),parseFloat(c),d)||this}var e=b.prototype;e.derive=function(a,c,d){return new b(a,c,d||this.domain)};e.setElementPosition=function(a){var b=this.convertTo("document");a.style.left=parseInt(b.x,10)+"px";a.style.top=parseInt(b.y,10)+"px";return this};e.setElementDimensions=function(a){return this.setElementWidth(a).setElementHeight(a)};e.setElementWidth=function(a){a.style.width=parseInt(this.x,10)+"px";return this};e.setElementHeight=function(a){a.style.height=parseInt(this.y,10)+"px";return this};e.scrollElementBy=function(a){a==document.body?window.scrollBy(this.x,this.y):(d("Scroll").setLeft(a,d("Scroll").getLeft(a)+this.x),d("Scroll").setTop(a,d("Scroll").getTop(a)+this.y));return this};b.from=function(a,c,d){return new b(a,c,d)};b.getEventPosition=function(a,b){b===void 0&&(b="document");a=c("Event").getPosition(a);a=this.from(a.x,a.y,"document");return a.convertTo(b)};b.getTouchEventPosition=function(a,b){b===void 0&&(b="document");a=a.touches[0];a=this.from(a.pageX,a.pageY,"document");return a.convertTo(b)};b.deserialize=function(a){a=a.split(",");return this.from(a[0],a[1])};return b}(c("DOMVector"));g["default"]=a}),98);
__d("Rect",["invariant","$","Vector","react"],(function(a,b,c,d,e,f,g,h){d("react");a=function(){function a(b,d,e,f,g){if(arguments.length===1){if(b instanceof a)return b;if(b instanceof c("Vector"))return new a(b.y,b.x,b.y,b.x,b.domain);typeof b==="string"&&(b=c("$")(b));return a.getElementBounds(b)}typeof b==="number"&&typeof d==="number"&&typeof e==="number"&&typeof f==="number"&&(!g||typeof g==="string")||h(0,1087);Object.assign(this,{t:b,r:d,b:e,l:f,domain:g||"pure"});return this}var b=a.prototype;b.w=function(){return this.r-this.l};b.h=function(){return this.b-this.t};b.getWidth=function(){return this.w()};b.getHeight=function(){return this.h()};b.toString=function(){return"(("+this.l+", "+this.t+"), ("+this.r+", "+this.b+"))"};b.contains=function(b){b=new a(b).convertTo(this.domain);var c=this;return c.l<=b.l&&c.r>=b.r&&c.t<=b.t&&c.b>=b.b};b.intersection=function(b){b=b.convertTo(this.domain);var c=Math.min(this.b,b.getBottom()),d=Math.max(this.l,b.getLeft()),e=Math.min(this.r,b.getRight());b=Math.max(this.t,b.getTop());return c>b&&e>d?new a(b,e,c,d):null};b.isEqualTo=function(a){return this.t===a.t&&this.r===a.r&&this.b===a.b&&this.l===a.l&&this.domain===a.domain};b.add=function(b,d){if(arguments.length==1){b instanceof a&&b.domain!="pure"&&(b=b.convertTo(this.domain));return b instanceof c("Vector")?this.add(b.x,b.y):this}var e=parseFloat(b),f=parseFloat(d);return new a(this.t+f,this.r+e,this.b+f,this.l+e,this.domain)};b.sub=function(a,b){if(arguments.length==1&&a instanceof c("Vector"))return this.add(a.mul(-1));else if(typeof a==="number"&&typeof b==="number")return this.add(-a,-b);return this};b.rotateAroundOrigin=function(b){var c=this.getCenter().rotate(b*Math.PI/2),d=0;b%2?(d=this.h(),b=this.w()):(d=this.w(),b=this.h());var e=c.y-b/2;c=c.x-d/2;b=e+b;d=c+d;return new a(e,d,b,c,this.domain)};b.boundWithin=function(a){var b=0,c=0;this.l<a.l?b=a.l-this.l:this.r>a.r&&(b=a.r-this.r);this.t<a.t?c=a.t-this.t:this.b>a.b&&(c=a.b-this.b);return this.add(b,c)};b.getCenter=function(){return new(c("Vector"))(this.l+this.w()/2,this.t+this.h()/2,this.domain)};b.getTop=function(){return this.t};b.getRight=function(){return this.r};b.getBottom=function(){return this.b};b.getLeft=function(){return this.l};b.getArea=function(){return(this.b-this.t)*(this.r-this.l)};b.getPositionVector=function(){return new(c("Vector"))(this.l,this.t,this.domain)};b.getDimensionVector=function(){return new(c("Vector"))(this.w(),this.h(),"pure")};b.convertTo=function(b){if(this.domain==b)return this;if(b=="pure")return new a(this.t,this.r,this.b,this.l,"pure");if(this.domain=="pure")return new a(0,0,0,0);var d=new(c("Vector"))(this.l,this.t,this.domain).convertTo(b);return new a(d.y,d.x+this.w(),d.y+this.h(),d.x,b)};a.deserialize=function(b){b=b.split(":");return new a(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3]),parseFloat(b[0]))};a.newFromVectors=function(b,c){return new a(b.y,b.x+c.x,b.y+c.y,b.x,b.domain)};a.getElementBounds=function(b){return a.newFromVectors(c("Vector").getElementPosition(b),c("Vector").getElementDimensions(b))};a.getViewportBounds=function(){return a.newFromVectors(c("Vector").getScrollPosition(),c("Vector").getViewportDimensions())};a.getViewportWithoutScrollbarsBounds=function(){return a.newFromVectors(c("Vector").getScrollPosition(),c("Vector").getViewportWithoutScrollbarDimensions())};a.minimumBoundingBox=function(b){var c=new a(Infinity,-Infinity,-Infinity,Infinity),d;for(var e=0;e<b.length;e++)d=b[e],c.t=Math.min(c.t,d.t),c.r=Math.max(c.r,d.r),c.b=Math.max(c.b,d.b),c.l=Math.min(c.l,d.l);return c};return a}();g["default"]=a}),98);